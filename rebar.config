%% Rebar3 configuration for Cure Programming Language
{erl_opts, [
    debug_info,
    warn_export_vars,
    warn_unused_import,
    warn_unused_function,
    {i, "include"},
    {i, "src/parser"},
    {i, "src/fsm"},
    {i, "src/types"}
]}.

{src_dirs, [
    "src",
    "src/lexer",
    "src/parser",
    "src/types",
    "src/codegen",
    "src/fsm",
    "src/runtime",
    "lsp"
]}.

{erl_first_files, []}.

{erlc_exclude_paths, ["src/verification"]}.

{deps, []}.

{project_plugins, [erlfmt, rebar3_ex_doc]}.

{erlfmt, [
    write,
    {files, ["src/**/*.erl", "test/**/*.erl", "lsp/**/*.erl", "*.erl"]}
]}.

{profiles, [
    {test, [
        {erl_opts, [debug_info, export_all]}
    ]},
    {docs, [
        {erl_opts, [
            debug_info,
            warn_export_vars,
            warn_unused_import,
            warn_unused_function,
            {i, "include"},
            {i, "src/parser"},
            {i, "src/fsm"},
            {i, "src/types"}
        ]}
    ]}
]}.

{shell, [
    {apps, []}
]}.

{cover_enabled, true}.
{cover_opts, [verbose]}.

%% ExDoc configuration
{ex_doc, [
    {source_url, <<"https://github.com/am-kantox/cure-lang">>},
    {extras, [
        {<<"README.md">>, #{title => <<"README">>}},
        {<<"docs/API_REFERENCE.md">>, #{title => <<"API Reference">>}},
        {<<"docs/CLI_USAGE.md">>, #{title => <<"CLI Usage">>}},
        {<<"docs/CURE_SYNTAX_GUIDE.md">>, #{title => <<"Syntax Guide">>}},
        {<<"docs/CURE_ULTIMATE_DESCRIPTION.md">>, #{title => <<"Ultimate Description">>}},
        {<<"docs/DERIVE_GUIDE.md">>, #{title => <<"Derive Guide">>}},
        {<<"docs/DOLLAR_OPERATOR_FIX.md">>, #{title => <<"Dollar Operator Fix">>}},
        {<<"docs/EDITOR_SETUP.md">>, #{title => <<"Editor Setup">>}},
        {<<"docs/FEATURE_REFERENCE.md">>, #{title => <<"Feature Reference">>}},
        {<<"docs/FSM_API_DESIGN.md">>, #{title => <<"FSM API Design">>}},
        {<<"docs/FSM_IMPLEMENTATION_SUMMARY.md">>, #{title => <<"FSM Implementation Summary">>}},
        {<<"docs/FSM_USAGE.md">>, #{title => <<"FSM Usage Guide">>}},
        {<<"docs/FUNCTION_TYPES.md">>, #{title => <<"Function Types">>}},
        {<<"docs/LANGUAGE_SPEC.md">>, #{title => <<"Language Specification">>}},
        {<<"docs/LSP_STATUS.md">>, #{title => <<"LSP Status">>}},
        {<<"docs/PIPE_OPERATOR_COMPLETED.md">>, #{title => <<"Pipe Operator Completed">>}},
        {<<"docs/PIPE_OPERATOR_IMPLEMENTATION.md">>, #{title => <<"Pipe Operator Implementation">>}},
        {<<"docs/PIPE_OPERATOR_RESULT_HANDLING.md">>, #{title => <<"Pipe Operator Result Handling">>}},
        {<<"docs/PROJECT_OVERVIEW.md">>, #{title => <<"Project Overview">>}},
        {<<"docs/RECORD_OPERATIONS_IMPLEMENTATION.md">>, #{title => <<"Record Operations">>}},
        {<<"docs/SMT_QUICK_REFERENCE.md">>, #{title => <<"SMT Quick Reference">>}},
        {<<"docs/SMT_SOLVER_INSTALLATION.md">>, #{title => <<"SMT Solver Installation">>}},
        {<<"docs/STD_SUMMARY.md">>, #{title => <<"Standard Library Summary">>}},
        {<<"docs/TYPECLASS_GUIDE.md">>, #{title => <<"Typeclass Guide">>}},
        {<<"docs/TYPECLASS_IMPLEMENTATION.md">>, #{title => <<"Typeclass Implementation">>}},
        {<<"docs/TYPECLASS_OPERATOR_SYNTAX.md">>, #{title => <<"Typeclass Operator Syntax">>}},
        {<<"docs/TYPECLASS_SUMMARY.md">>, #{title => <<"Typeclass Summary">>}},
        {<<"docs/TYPE_SYSTEM.md">>, #{title => <<"Type System">>}},
        {<<"docs/pipe_operator.md">>, #{title => <<"Pipe Operator">>}}
    ]},
    {main, <<"readme">>},
    {output, "docs/_build"}
]}.

{hex, [{doc, ex_doc}]}.
