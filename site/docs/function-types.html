<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Function Types in Cure - Cure Documentation</title>
    <meta name="description" content=" Overview">
    <link rel="icon" type="image/png" href="../media/logo-128x128.png">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/cure-theme.css">
</head>
<body>
    <!-- Header -->
    <header class="site-header">
        <div class="nav-container">
            <div class="logo-section">
                <img src="../media/logo-128x128.png" alt="Cure Logo" class="logo">
                <div>
                    <h1 class="site-title">Cure</h1>
                    <p class="site-tagline">Verification-First Programming</p>
                </div>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../docs.html">Documentation</a></li>
                    <li><a href="../api/index.html">API Reference</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="doc-page">
        <div class="doc-nav">
            <a href="../docs.html">‚Üê Back to Documentation</a>
        </div>
        
        <h1 id="function-types-in-cure">Function Types in Cure</h1>
<h2 id="overview">Overview</h2>
<p>Cure uses the <code>=&gt;</code> operator to denote function types, distinct from the <code>-&gt;</code> operator used in pattern matching, lambdas, and FSM transitions.</p>
<h2 id="syntax">Syntax</h2>
<h3 id="function-type-arrow">Function Type Arrow: <code>=&gt;</code></h3>
<p>Used to specify function types in type annotations:</p>
<div class="codehilite"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">Simple</span><span class="w"> </span><span class="nx">function</span><span class="w"> </span><span class="k">type</span>
<span class="nx">def</span><span class="w"> </span><span class="nx">map</span><span class="p">(</span><span class="nx">f</span><span class="p">:</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">B</span><span class="p">,</span><span class="w"> </span><span class="nx">list</span><span class="p">:</span><span class="w"> </span><span class="nx">List</span><span class="p">(</span><span class="nx">A</span><span class="p">)):</span><span class="w"> </span><span class="nx">List</span><span class="p">(</span><span class="nx">B</span><span class="p">)</span>

<span class="err">#</span><span class="w"> </span><span class="nx">Curried</span><span class="w"> </span><span class="nx">function</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="p">(</span><span class="nx">right</span><span class="o">-</span><span class="nx">associative</span><span class="p">)</span>
<span class="nx">def</span><span class="w"> </span><span class="nx">compose</span><span class="p">(</span><span class="nx">f</span><span class="p">:</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">B</span><span class="p">,</span><span class="w"> </span><span class="nx">g</span><span class="p">:</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">C</span><span class="p">):</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">C</span>

<span class="err">#</span><span class="w"> </span><span class="nx">Function</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="nx">nested</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="nx">constructor</span>
<span class="nx">def</span><span class="w"> </span><span class="nx">ap</span><span class="p">(</span><span class="nx">ff</span><span class="p">:</span><span class="w"> </span><span class="nx">F</span><span class="p">(</span><span class="nx">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">B</span><span class="p">),</span><span class="w"> </span><span class="nx">x</span><span class="p">:</span><span class="w"> </span><span class="nx">F</span><span class="p">(</span><span class="nx">A</span><span class="p">)):</span><span class="w"> </span><span class="nx">F</span><span class="p">(</span><span class="nx">B</span><span class="p">)</span>

<span class="err">#</span><span class="w"> </span><span class="nx">Function</span><span class="w"> </span><span class="nx">returning</span><span class="w"> </span><span class="nx">function</span>
<span class="nx">def</span><span class="w"> </span><span class="nx">curry</span><span class="p">(</span><span class="nx">f</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="nx">A</span><span class="p">,</span><span class="w"> </span><span class="nx">B</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">C</span><span class="p">):</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">C</span>
</code></pre></div>

<h3 id="matchlambda-arrow-">Match/Lambda Arrow: <code>-&gt;</code></h3>
<p>Used for pattern matching and lambda expressions:</p>
<div class="codehilite"><pre><span></span><code><span class="cp"># Match arms</span>
<span class="n">match</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">do</span>
<span class="w">  </span><span class="p">[]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="p">[</span><span class="n">x</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">xs</span><span class="p">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
<span class="kd">end</span>

<span class="cp"># Lambda expressions</span>
<span class="nf">map</span><span class="p">(</span><span class="n">fn</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kd">end,</span><span class="w"> </span><span class="n">numbers</span><span class="p">)</span>

<span class="cp"># FSM transitions</span>
<span class="n">state</span><span class="w"> </span><span class="n">Ready</span><span class="w"> </span><span class="n">do</span>
<span class="w">  </span><span class="nf">event</span><span class="p">(</span><span class="n">start</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Running</span>
<span class="kd">end</span>
</code></pre></div>

<h2 id="rationale">Rationale</h2>
<p>The separation eliminates parsing ambiguity:</p>
<div class="codehilite"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">Without</span><span class="w"> </span><span class="nx">separation</span><span class="p">,</span><span class="w"> </span><span class="nx">this</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">ambiguous</span><span class="p">:</span>
<span class="nx">def</span><span class="w"> </span><span class="nx">func</span><span class="p">(</span><span class="nx">f</span><span class="p">:</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nx">B</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">:</span><span class="w"> </span><span class="nx">A</span><span class="p">):</span><span class="w"> </span><span class="nx">B</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">Is</span><span class="w"> </span><span class="s">&quot;A -&gt; B&quot;</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="nx">part</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="k">match</span><span class="p">?</span>

<span class="err">#</span><span class="w"> </span><span class="nx">With</span><span class="w"> </span><span class="o">=&gt;</span><span class="p">,</span><span class="w"> </span><span class="nx">it</span><span class="err">&#39;</span><span class="nx">s</span><span class="w"> </span><span class="nx">clear</span><span class="p">:</span>
<span class="nx">def</span><span class="w"> </span><span class="nx">func</span><span class="p">(</span><span class="nx">f</span><span class="p">:</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">B</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">:</span><span class="w"> </span><span class="nx">A</span><span class="p">):</span><span class="w"> </span><span class="nx">B</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">clearly</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">function</span><span class="w"> </span><span class="k">type</span>
</code></pre></div>

<h2 id="type-system-integration">Type System Integration</h2>
<h3 id="in-typeclasses">In Typeclasses</h3>
<div class="codehilite"><pre><span></span><code><span class="nx">typeclass</span><span class="w"> </span><span class="nx">Functor</span><span class="p">(</span><span class="nx">F</span><span class="p">)</span><span class="w"> </span><span class="nx">do</span>
<span class="w">  </span><span class="nx">def</span><span class="w"> </span><span class="nx">map</span><span class="p">(</span><span class="nx">f</span><span class="p">:</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">B</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">:</span><span class="w"> </span><span class="nx">F</span><span class="p">(</span><span class="nx">A</span><span class="p">)):</span><span class="w"> </span><span class="nx">F</span><span class="p">(</span><span class="nx">B</span><span class="p">)</span>
<span class="nx">end</span>

<span class="nx">typeclass</span><span class="w"> </span><span class="nx">Monad</span><span class="p">(</span><span class="nx">M</span><span class="p">)</span><span class="w"> </span><span class="nx">do</span>
<span class="w">  </span><span class="nx">def</span><span class="w"> </span><span class="nx">bind</span><span class="p">(</span><span class="nx">m</span><span class="p">:</span><span class="w"> </span><span class="nx">M</span><span class="p">(</span><span class="nx">A</span><span class="p">),</span><span class="w"> </span><span class="nx">f</span><span class="p">:</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">M</span><span class="p">(</span><span class="nx">B</span><span class="p">)):</span><span class="w"> </span><span class="nx">M</span><span class="p">(</span><span class="nx">B</span><span class="p">)</span>
<span class="nx">end</span>
</code></pre></div>

<h3 id="in-type-definitions">In Type Definitions</h3>
<div class="codehilite"><pre><span></span><code><span class="k">type</span><span class="w"> </span><span class="nx">Handler</span><span class="p">(</span><span class="nx">A</span><span class="p">,</span><span class="w"> </span><span class="nx">B</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">B</span>
<span class="k">type</span><span class="w"> </span><span class="nx">Predicate</span><span class="p">(</span><span class="nx">A</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">Bool</span>
<span class="k">type</span><span class="w"> </span><span class="nx">Callback</span><span class="p">(</span><span class="nx">A</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">Unit</span>
</code></pre></div>

<h3 id="in-function-signatures">In Function Signatures</h3>
<div class="codehilite"><pre><span></span><code class="language-cure"># Higher-order function
def filter(pred: A =&gt; Bool, list: List(A)): List(A)

# Function taking function returning function
def compose(f: B =&gt; C, g: A =&gt; B): A =&gt; C

# Multiple function parameters
def foldMap(f: A =&gt; B, op: B =&gt; B =&gt; B, init: B, list: List(A)): B
</code></pre></div>

<h2 id="implementation-details">Implementation Details</h2>
<ul>
<li><strong>Lexer</strong>: <code>=&gt;</code> is tokenized as a two-character operator</li>
<li><strong>Parser</strong>: <code>parse_type_with_arrows</code> handles <code>=&gt;</code> for function types</li>
<li><strong>Operator Precedence</strong>: <code>=&gt;</code> is NOT an expression operator (not in <code>get_operator_info</code>)</li>
<li><strong>Type Parameters</strong>: <code>parse_type_parameter</code> calls <code>parse_type</code> to properly handle function types in contexts like <code>F(A =&gt; B)</code></li>
</ul>
<h2 id="examples">Examples</h2>
<h3 id="simple-function-type">Simple Function Type</h3>
<div class="codehilite"><pre><span></span><code class="language-cure">def apply(f: A =&gt; B, x: A): B = f(x)
</code></pre></div>

<h3 id="nested-function-type">Nested Function Type</h3>
<div class="codehilite"><pre><span></span><code><span class="nx">typeclass</span><span class="w"> </span><span class="nx">Applicative</span><span class="p">(</span><span class="nx">F</span><span class="p">)</span><span class="w"> </span><span class="nx">do</span>
<span class="w">  </span><span class="nx">def</span><span class="w"> </span><span class="nx">ap</span><span class="p">(</span><span class="nx">ff</span><span class="p">:</span><span class="w"> </span><span class="nx">F</span><span class="p">(</span><span class="nx">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nx">B</span><span class="p">),</span><span class="w"> </span><span class="nx">x</span><span class="p">:</span><span class="w"> </span><span class="nx">F</span><span class="p">(</span><span class="nx">A</span><span class="p">)):</span><span class="w"> </span><span class="nx">F</span><span class="p">(</span><span class="nx">B</span><span class="p">)</span>
<span class="nx">end</span>
</code></pre></div>

<h3 id="curried-function-type">Curried Function Type</h3>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">Int</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Int</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fn</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">fn</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="kd">end end</span>
</code></pre></div>

<h3 id="function-composition">Function Composition</h3>
<div class="codehilite"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">compose</span><span class="p">(</span><span class="n">f</span><span class="o">:</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">C</span><span class="p">,</span><span class="w"> </span><span class="n">g</span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">B</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="n">fn</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="w"> </span><span class="kd">end</span>
</code></pre></div>

<h2 id="migration-guide">Migration Guide</h2>
<p>If you have existing code using <code>-&gt;</code> for function types, replace with <code>=&gt;</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="cp"># Before</span>
<span class="n">def</span><span class="w"> </span><span class="nf">map</span><span class="p">(</span><span class="n">f</span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="o">:</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="n">A</span><span class="p">))</span><span class="o">:</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>

<span class="cp"># After  </span>
<span class="n">def</span><span class="w"> </span><span class="nf">map</span><span class="p">(</span><span class="n">f</span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="o">:</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="n">A</span><span class="p">))</span><span class="o">:</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
</code></pre></div>

<p>Note: Do NOT change <code>-&gt;</code> in match arms, lambdas, or FSM transitions!</p>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="TYPECLASSES.md">Typeclass System</a></li>
<li><a href="PATTERN_MATCHING.md">Pattern Matching</a></li>
<li><a href="LAMBDAS.md">Lambda Expressions</a></li>
</ul>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Documentation</h4>
                <ul>
                    <li><a href="../docs.html">Getting Started</a></li>
                    <li><a href="language-spec.html">Language Specification</a></li>
                    <li><a href="type-system.html">Type System</a></li>
                    <li><a href="fsm-usage.html">FSM Guide</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Reference</h4>
                <ul>
                    <li><a href="../api/index.html">API Reference</a></li>
                    <li><a href="std-summary.html">Standard Library</a></li>
                    <li><a href="feature-reference.html">Feature Reference</a></li>
                    <li><a href="cli-usage.html">CLI Usage</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>All Documentation</h4>
                <ul>
                    <li><a href="cli-integration-status.html">CLI Integration - SMT Solver Options and</a></li>
                    <li><a href="codegen-analysis-2025-11-25.html">Code Generation Issues - Analysis (2025-</a></li>
                    <li><a href="codegen-investigation-summary.html">Code Generation Issues - Investigation S</a></li>
                    <li><a href="contributing.html">Contributing</a></li>
                    <li><a href="api-reference.html">Cure API Reference</a></li>
                    <li><a href="fsm-api-design.html">Cure FSM API Design</a></li>
                    <li><a href="fsm-usage.html">Cure FSM Usage Guide</a></li>
                    <li><a href="lsp-mcp-update-2025-11-26.html">Cure LSP and MCP Update - November 26, 2</a></li>
                    <li><a href="lsp-smt-user-guide.html">Cure LSP with SMT Verification - User Gu</a></li>
                    <li><a href="feature-reference.html">Cure Language Features Reference</a></li>
                    <li><a href="language-spec.html">Cure Language Specification</a></li>
                    <li><a href="cure-syntax-guide.html">Cure Language Syntax Guide</a></li>
                    <li><a href="cure-ultimate-description.html">Cure Language: Ultimate Implementation D</a></li>
                    <li><a href="mcp-integration.html">Cure MCP Integration</a></li>
                    <li><a href="cli-usage.html">Cure Programming Language - Command Line</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2025 Cure Programming Language. Verification-first programming for the BEAM.</p>
        </div>
    </footer>

    <!-- Syntax Highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
    <script src="../js/cure-language.js"></script>
    <script>
        // Initialize highlight.js and highlight all code blocks
        hljs.highlightAll();
    </script>
</body>
</html>
