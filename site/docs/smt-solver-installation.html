<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMT Solver Installation Guide - Cure Documentation</title>
    <meta name="description" content="This guide explains how to install Z3 and CVC5 SMT solvers for use with the Cure compiler's dependent type verification system.">
    <link rel="icon" type="image/png" href="../media/logo-128x128.png">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/cure-theme.css">
</head>
<body>
    <!-- Header -->
    <header class="site-header">
        <div class="nav-container">
            <div class="logo-section">
                <img src="../media/logo-128x128.png" alt="Cure Logo" class="logo">
                <div>
                    <h1 class="site-title">Cure</h1>
                    <p class="site-tagline">Verification-First Programming</p>
                </div>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../docs.html">Documentation</a></li>
                    <li><a href="../api/index.html">API Reference</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="doc-page">
        <div class="doc-nav">
            <a href="../docs.html">‚Üê Back to Documentation</a>
        </div>
        
        <h1 id="smt-solver-installation-guide">SMT Solver Installation Guide</h1>
<p>This guide explains how to install Z3 and CVC5 SMT solvers for use with the Cure compiler's dependent type verification system.</p>
<hr />
<h2 id="z3-smt-solver-recommended">Z3 SMT Solver (Recommended)</h2>
<h3 id="ubuntudebian">Ubuntu/Debian</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Install from official repositories (Ubuntu 20.04+)</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>z3

<span class="c1"># Verify installation</span>
z3<span class="w"> </span>--version
<span class="c1"># Expected output: Z3 version 4.8.x or later</span>
</code></pre></div>

<h3 id="from-source-latest-version">From Source (Latest Version)</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Install dependencies</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>python3<span class="w"> </span>git<span class="w"> </span>cmake<span class="w"> </span>build-essential

<span class="c1"># Clone and build</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/Z3Prover/z3.git
<span class="nb">cd</span><span class="w"> </span>z3
python3<span class="w"> </span>scripts/mk_make.py
<span class="nb">cd</span><span class="w"> </span>build
make
sudo<span class="w"> </span>make<span class="w"> </span>install

<span class="c1"># Verify</span>
z3<span class="w"> </span>--version
</code></pre></div>

<h3 id="testing-z3">Testing Z3</h3>
<p>Create a test file <code>test.smt2</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="n">set</span><span class="o">-</span><span class="n">logic</span><span class="w"> </span><span class="n">QF_LIA</span><span class="p">)</span>
<span class="p">(</span><span class="n">declare</span><span class="o">-</span><span class="k">const</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">Int</span><span class="p">)</span>
<span class="p">(</span><span class="n">declare</span><span class="o">-</span><span class="k">const</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">Int</span><span class="p">)</span>
<span class="p">(</span><span class="nb">assert</span><span class="w"> </span><span class="p">(</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="p">))</span>
<span class="p">(</span><span class="nb">assert</span><span class="w"> </span><span class="p">(</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<span class="p">(</span><span class="n">check</span><span class="o">-</span><span class="n">sat</span><span class="p">)</span>
<span class="p">(</span><span class="n">get</span><span class="o">-</span><span class="n">model</span><span class="p">)</span>
</code></pre></div>

<p>Run:</p>
<div class="codehilite"><pre><span></span><code>z3<span class="w"> </span>-smt2<span class="w"> </span>test.smt2
<span class="c1"># Expected output:</span>
<span class="c1"># sat</span>
<span class="c1"># (model</span>
<span class="c1">#   (define-fun y () Int 1)</span>
<span class="c1">#   (define-fun x () Int 2)</span>
<span class="c1"># )</span>
</code></pre></div>

<hr />
<h2 id="cvc5-smt-solver-alternative">CVC5 SMT Solver (Alternative)</h2>
<h3 id="ubuntudebian-binary-release">Ubuntu/Debian (Binary Release)</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Download latest release</span>
wget<span class="w"> </span>https://github.com/cvc5/cvc5/releases/download/cvc5-1.0.8/cvc5-Linux
chmod<span class="w"> </span>+x<span class="w"> </span>cvc5-Linux
sudo<span class="w"> </span>mv<span class="w"> </span>cvc5-Linux<span class="w"> </span>/usr/local/bin/cvc5

<span class="c1"># Verify installation</span>
cvc5<span class="w"> </span>--version
</code></pre></div>

<h3 id="from-source">From Source</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Install dependencies</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>cmake<span class="w"> </span>libgmp-dev

<span class="c1"># Clone and build</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/cvc5/cvc5.git
<span class="nb">cd</span><span class="w"> </span>cvc5
./configure.sh
<span class="nb">cd</span><span class="w"> </span>build
make
sudo<span class="w"> </span>make<span class="w"> </span>install

<span class="c1"># Verify</span>
cvc5<span class="w"> </span>--version
</code></pre></div>

<h3 id="testing-cvc5">Testing CVC5</h3>
<p>Using the same <code>test.smt2</code>:</p>
<div class="codehilite"><pre><span></span><code>cvc5<span class="w"> </span>--lang<span class="w"> </span>smt2<span class="w"> </span>test.smt2
<span class="c1"># Expected similar output to Z3</span>
</code></pre></div>

<hr />
<h2 id="using-with-cure">Using with Cure</h2>
<h3 id="erlang-api-level">Erlang API Level</h3>
<p>The SMT solver is available at the Erlang API level and can be used programmatically:</p>
<div class="codehilite"><pre><span></span><code><span class="c">% Start solver</span>
<span class="p">{</span><span class="n">ok</span><span class="p">,</span><span class="w"> </span><span class="nv">Pid</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">cure_smt_process</span><span class="p">:</span><span class="nf">start_solver</span><span class="p">(</span><span class="n">z3</span><span class="p">,</span><span class="w"> </span><span class="mi">5000</span><span class="p">).</span>

<span class="c">% Check constraint</span>
<span class="nv">Result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">cure_smt_solver</span><span class="p">:</span><span class="nf">check_constraint</span><span class="p">(</span><span class="nv">Constraint</span><span class="p">,</span><span class="w"> </span><span class="nv">Env</span><span class="p">).</span>

<span class="c">% Stop solver</span>
<span class="nn">cure_smt_process</span><span class="p">:</span><span class="nf">stop_solver</span><span class="p">(</span><span class="nv">Pid</span><span class="p">).</span>
</code></pre></div>

<h3 id="cli-integration-not-yet-implemented">CLI Integration (Not Yet Implemented)</h3>
<p><strong>Status</strong>: ‚ö†Ô∏è CLI options for SMT solver integration are <strong>planned but not yet implemented</strong>.</p>
<p>The following options are documented for future implementation:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Planned (not yet available):</span>
./cure<span class="w"> </span>--smt-solver<span class="w"> </span>z3<span class="w"> </span>examples/dependent_types.cure
./cure<span class="w"> </span>--no-smt<span class="w"> </span>examples/dependent_types.cure
./cure<span class="w"> </span>--smt-timeout<span class="w"> </span><span class="m">10000</span><span class="w"> </span>examples/dependent_types.cure
</code></pre></div>

<p><strong>Current CLI Options</strong>: See <code>cure --help</code> for currently available options.</p>
<hr />
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="solver-not-found-error">"Solver not found" error</h3>
<ul>
<li>Check installation: <code>which z3</code> or <code>which cvc5</code></li>
<li>Ensure solver is in PATH</li>
<li>Try absolute path in Cure config</li>
</ul>
<h3 id="timeout-errors">Timeout errors</h3>
<ul>
<li>Increase timeout: <code>--smt-timeout 30000</code></li>
<li>Simplify constraints</li>
<li>Check solver is responding: <code>z3 -smt2 -in</code> (interactive mode)</li>
</ul>
<h3 id="permission-errors">Permission errors</h3>
<ul>
<li>Ensure solver executable: <code>chmod +x /usr/local/bin/z3</code></li>
<li>Check PATH: <code>echo $PATH</code></li>
</ul>
<hr />
<h2 id="performance-tips">Performance Tips</h2>
<ol>
<li><strong>Use Z3 as primary</strong>: Generally faster for arithmetic constraints</li>
<li><strong>Set appropriate timeouts</strong>: Start with 5s, increase if needed</li>
<li><strong>Cache results</strong>: Cure caches constraint checking results</li>
<li><strong>Use symbolic fallback for simple constraints</strong>: No solver overhead</li>
</ol>
<hr />
<h2 id="version-requirements">Version Requirements</h2>
<ul>
<li><strong>Z3</strong>: Version 4.8.0 or later</li>
<li><strong>CVC5</strong>: Version 1.0.0 or later</li>
</ul>
<p>Older versions may work but are untested.</p>
<hr />
<h2 id="integration-status">Integration Status</h2>
<ul>
<li>‚úÖ <strong>SMT Solver Implementation</strong>: Complete at Erlang API level</li>
<li>‚úÖ <strong>Z3 Support</strong>: Fully implemented and tested</li>
<li>‚ö†Ô∏è <strong>CLI Integration</strong>: Not yet implemented (requires adding CLI flags)</li>
<li>üìã <strong>CVC5 Support</strong>: Stub exists, full implementation planned</li>
</ul>
<hr />
<p><strong>Last Updated:</strong> October 31, 2025</p>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Documentation</h4>
                <ul>
                    <li><a href="../docs.html">Getting Started</a></li>
                    <li><a href="language-spec.html">Language Specification</a></li>
                    <li><a href="type-system.html">Type System</a></li>
                    <li><a href="fsm-usage.html">FSM Guide</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Reference</h4>
                <ul>
                    <li><a href="../api/index.html">API Reference</a></li>
                    <li><a href="std-summary.html">Standard Library</a></li>
                    <li><a href="feature-reference.html">Feature Reference</a></li>
                    <li><a href="cli-usage.html">CLI Usage</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>All Documentation</h4>
                <ul>
                    <li><a href="contributing.html">Contributing</a></li>
                    <li><a href="api-reference.html">Cure API Reference</a></li>
                    <li><a href="fsm-api-design.html">Cure FSM API Design</a></li>
                    <li><a href="fsm-usage.html">Cure FSM Usage Guide</a></li>
                    <li><a href="lsp-smt-user-guide.html">Cure LSP with SMT Verification - User Gu</a></li>
                    <li><a href="feature-reference.html">Cure Language Features Reference</a></li>
                    <li><a href="language-spec.html">Cure Language Specification</a></li>
                    <li><a href="cure-syntax-guide.html">Cure Language Syntax Guide</a></li>
                    <li><a href="cure-ultimate-description.html">Cure Language: Ultimate Implementation D</a></li>
                    <li><a href="mcp-integration.html">Cure MCP Integration</a></li>
                    <li><a href="cli-usage.html">Cure Programming Language - Command Line</a></li>
                    <li><a href="project-overview.html">Cure Programming Language - Project Over</a></li>
                    <li><a href="troubleshooting.html">Cure SMT Troubleshooting Guide</a></li>
                    <li><a href="std-summary.html">Cure Standard Library Implementation Sum</a></li>
                    <li><a href="type-system.html">Cure Type System</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2025 Cure Programming Language. Verification-first programming for the BEAM.</p>
        </div>
    </footer>

    <!-- Syntax Highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
    <script src="../js/cure-language.js"></script>
    <script>
        // Initialize highlight.js and highlight all code blocks
        hljs.highlightAll();
    </script>
</body>
</html>
